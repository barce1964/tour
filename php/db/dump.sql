-- --------------------------------------------------------
-- Хост:                         127.0.0.1
-- Версия сервера:               8.0.19 - MySQL Community Server - GPL
-- Операционная система:         Win64
-- HeidiSQL Версия:              11.2.0.6213
-- --------------------------------------------------------

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET NAMES utf8 */;
/*!50503 SET NAMES utf8mb4 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;


-- Дамп структуры базы данных tour
CREATE DATABASE IF NOT EXISTS `tour` /*!40100 DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci */ /*!80016 DEFAULT ENCRYPTION='N' */;
USE `tour`;

-- Дамп структуры для таблица tour.adm_users_adm
CREATE TABLE IF NOT EXISTS `adm_users_adm` (
  `ID_USER_ADM` int NOT NULL AUTO_INCREMENT,
  `ID_COUNTRY` int DEFAULT NULL,
  `ID_SP_SITY` int DEFAULT NULL,
  `FIRST_NAME_ADM` varchar(20) DEFAULT NULL,
  `LAST_NAME_ADM` varchar(20) DEFAULT NULL,
  `PHONE_NUM_ADM` varchar(14) NOT NULL,
  `EMAIL_ADM` varchar(30) NOT NULL,
  `PARENT_USER_ADM` int DEFAULT NULL,
  `CARD_NUM_USER_ADM` varchar(16) NOT NULL,
  `LOGIN_ADM` varchar(20) DEFAULT NULL,
  `USER_ADM_CIF` varchar(11) DEFAULT NULL,
  `USER_ADM_IV` varchar(255) DEFAULT NULL,
  `USER_ADM_KEY` varchar(255) DEFAULT NULL,
  `PASSWD_ADM` varchar(200) DEFAULT NULL,
  PRIMARY KEY (`ID_USER_ADM`),
  UNIQUE KEY `EMAI_ADM_IDX` (`EMAIL_ADM`),
  UNIQUE KEY `LOGIN_ADM_IDX` (`LOGIN_ADM`),
  KEY `FIRST_NAME_IDX_ADM` (`FIRST_NAME_ADM`),
  KEY `LAST_NAME_IDX_ADM` (`LAST_NAME_ADM`),
  KEY `PHONE_NUM_ADM_IDX` (`PHONE_NUM_ADM`),
  KEY `CARD_NUM_ADM_IDX` (`CARD_NUM_USER_ADM`),
  KEY `FK_ADM_USER_REFERENCE_SP_COUNT` (`ID_COUNTRY`),
  KEY `FK_ADM_USER_REFERENCE_SP_CITIE` (`ID_SP_SITY`),
  CONSTRAINT `FK_ADM_USER_REFERENCE_SP_CITIE` FOREIGN KEY (`ID_SP_SITY`) REFERENCES `sp_cities` (`ID_SP_CITY`) ON DELETE RESTRICT ON UPDATE RESTRICT,
  CONSTRAINT `FK_ADM_USER_REFERENCE_SP_COUNT` FOREIGN KEY (`ID_COUNTRY`) REFERENCES `sp_countries` (`ID_COUNTRY`) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

-- Дамп данных таблицы tour.adm_users_adm: ~1 rows (приблизительно)
/*!40000 ALTER TABLE `adm_users_adm` DISABLE KEYS */;
INSERT INTO `adm_users_adm` (`ID_USER_ADM`, `ID_COUNTRY`, `ID_SP_SITY`, `FIRST_NAME_ADM`, `LAST_NAME_ADM`, `PHONE_NUM_ADM`, `EMAIL_ADM`, `PARENT_USER_ADM`, `CARD_NUM_USER_ADM`, `LOGIN_ADM`, `USER_ADM_CIF`, `USER_ADM_IV`, `USER_ADM_KEY`, `PASSWD_ADM`) VALUES
	(1, 1, 1, 'Александр', 'Тараев', '+77771210112', 'alex@artour.com', 0, '4400165374568723', 'admin', 'aes-256-ofb', 'd;90a+JuYO4!nAL-', '<urqK$n#cOV^56oV7|PJ+OyV;Oj45E0^', '+EkHvmZQohASWXg=');
/*!40000 ALTER TABLE `adm_users_adm` ENABLE KEYS */;

-- Дамп структуры для таблица tour.sp_cities
CREATE TABLE IF NOT EXISTS `sp_cities` (
  `ID_SP_CITY` int NOT NULL AUTO_INCREMENT,
  `ID_COUNTRY` int DEFAULT NULL,
  `NAME_CITY` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  PRIMARY KEY (`ID_SP_CITY`) USING BTREE,
  KEY `FK_SP_CITIE_REFERENCE_SP_COUNT` (`ID_COUNTRY`),
  KEY `NAME_SITY_IDX` (`NAME_CITY`) USING BTREE,
  CONSTRAINT `FK_SP_CITIE_REFERENCE_SP_COUNT` FOREIGN KEY (`ID_COUNTRY`) REFERENCES `sp_countries` (`ID_COUNTRY`) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

-- Дамп данных таблицы tour.sp_cities: ~0 rows (приблизительно)
/*!40000 ALTER TABLE `sp_cities` DISABLE KEYS */;
INSERT INTO `sp_cities` (`ID_SP_CITY`, `ID_COUNTRY`, `NAME_CITY`) VALUES
	(1, 1, 'Алматы');
/*!40000 ALTER TABLE `sp_cities` ENABLE KEYS */;

-- Дамп структуры для таблица tour.sp_countries
CREATE TABLE IF NOT EXISTS `sp_countries` (
  `ID_COUNTRY` int NOT NULL AUTO_INCREMENT,
  `NAME_COUNTRY` varchar(50) NOT NULL,
  PRIMARY KEY (`ID_COUNTRY`),
  UNIQUE KEY `NAME_COUNTRY_IDX` (`NAME_COUNTRY`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

-- Дамп данных таблицы tour.sp_countries: ~0 rows (приблизительно)
/*!40000 ALTER TABLE `sp_countries` DISABLE KEYS */;
INSERT INTO `sp_countries` (`ID_COUNTRY`, `NAME_COUNTRY`) VALUES
	(1, 'Казахстан');
/*!40000 ALTER TABLE `sp_countries` ENABLE KEYS */;

-- Дамп структуры для таблица tour.wk_family
CREATE TABLE IF NOT EXISTS `wk_family` (
  `ID_FAMILY` int NOT NULL AUTO_INCREMENT,
  `ID_COUNTRY` int DEFAULT NULL,
  `ID_SP_SITY` int DEFAULT NULL,
  `FAMILY` varchar(20) DEFAULT NULL,
  `LOGIN` varchar(20) DEFAULT NULL,
  `PASSWD` varchar(200) DEFAULT NULL,
  PRIMARY KEY (`ID_FAMILY`),
  UNIQUE KEY `LOGIN_IDX` (`LOGIN`),
  KEY `FAMILY_IDX` (`FAMILY`),
  KEY `FK_WK_FAMIL_REFERENCE_SP_COUNT` (`ID_COUNTRY`),
  KEY `FK_WK_FAMIL_REFERENCE_SP_CITIE` (`ID_SP_SITY`),
  CONSTRAINT `FK_WK_FAMIL_REFERENCE_SP_CITIE` FOREIGN KEY (`ID_SP_SITY`) REFERENCES `sp_cities` (`ID_SP_CITY`) ON DELETE RESTRICT ON UPDATE RESTRICT,
  CONSTRAINT `FK_WK_FAMIL_REFERENCE_SP_COUNT` FOREIGN KEY (`ID_COUNTRY`) REFERENCES `sp_countries` (`ID_COUNTRY`) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

-- Дамп данных таблицы tour.wk_family: ~0 rows (приблизительно)
/*!40000 ALTER TABLE `wk_family` DISABLE KEYS */;
/*!40000 ALTER TABLE `wk_family` ENABLE KEYS */;

-- Дамп структуры для таблица tour.wk_users
CREATE TABLE IF NOT EXISTS `wk_users` (
  `ID_USER_WK` int NOT NULL AUTO_INCREMENT,
  `ID_FAMILY` int DEFAULT NULL,
  `FIRST_NAME_WK` varchar(20) DEFAULT NULL,
  `LAST_NAME_WK` varchar(20) DEFAULT NULL,
  `PHONE_NUM_WK` varchar(14) DEFAULT NULL,
  `EMAIL_USER_WK` varchar(30) DEFAULT NULL,
  `NUM_PASS` varchar(30) DEFAULT NULL,
  `SCAN_PASS` varchar(100) DEFAULT NULL,
  `USER_CIF` varchar(11) DEFAULT NULL,
  `USER_IV` varchar(255) DEFAULT NULL,
  `USER_KEY` varchar(255) DEFAULT NULL,
  `PWD` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`ID_USER_WK`),
  KEY `FIRST_NAME_WK_IDX` (`FIRST_NAME_WK`),
  KEY `LAST_NAME_WK_IDX` (`LAST_NAME_WK`),
  KEY `PHONE_NUM_WK_IDX` (`PHONE_NUM_WK`),
  KEY `EMAIL_USER_WK_IDX` (`EMAIL_USER_WK`),
  KEY `FK_WK_USERS_REFERENCE_WK_FAMIL` (`ID_FAMILY`),
  CONSTRAINT `FK_WK_USERS_REFERENCE_WK_FAMIL` FOREIGN KEY (`ID_FAMILY`) REFERENCES `wk_family` (`ID_FAMILY`) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

-- Дамп данных таблицы tour.wk_users: ~0 rows (приблизительно)
/*!40000 ALTER TABLE `wk_users` DISABLE KEYS */;
/*!40000 ALTER TABLE `wk_users` ENABLE KEYS */;

/*!40101 SET SQL_MODE=IFNULL(@OLD_SQL_MODE, '') */;
/*!40014 SET FOREIGN_KEY_CHECKS=IFNULL(@OLD_FOREIGN_KEY_CHECKS, 1) */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40111 SET SQL_NOTES=IFNULL(@OLD_SQL_NOTES, 1) */;
